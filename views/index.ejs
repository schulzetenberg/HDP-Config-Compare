<!DOCTYPE html>
<html ng-app="mainApp">
  <link rel="stylesheet" href="styles.css">
  <body ng-controller="mainCtrl">

  <h1>HDP Configuration Compare</h1>

  <h3>Cluster List (Start)</h3>
  <select ng-model="selectedCluster" ng-change="configList(selectedCluster, 'configs')">
    <option ng-repeat="cluster in clusters" ng-selected="selectedCluster == cluster" value="{{cluster}}" ng-bind="cluster"></option>
  </select>

  <h3>Cluster Configs</h3>
  <select ng-model="selectedConfig" ng-options="key as key for (key , value) in configs"></select>


  <h3>Cluster to Compare With</h3>
  <select ng-model="compareCluster" ng-change="configList(compareCluster, 'configsCompare')">
    <option ng-if="cluster !== selectedCluster" ng-repeat="cluster in clusters" ng-selected="compareCluster == cluster" value="{{cluster}}" ng-bind="cluster"></option>
  </select>

  <button ng-click="getConfig()" ng-disabled="!configsCompare">
    Go
  </button>

  <table>
    <tr>
      <th>Property</th>
      <th ng-bind="selectedCluster"></th>
      <th ng-bind="compareCluster"></th>
    </tr>
    <tr ng-repeat="x in differences">
      <td ng-bind="x.path[0]"></td>
      <td ng-class="{'bg-red': x.kind === 'D', 'bg-yellow': x.kind === 'E'}" ng-bind="x.lhs"></td>
      <td ng-class="{'bg-green': x.kind === 'N', 'bg-yellow': x.kind === 'E'}" ng-bind="x.rhs"></td>
    </tr>
  </table>

  </body>
  <script src="https://rawgit.com/flitbit/diff/master/releases/deep-diff-0.3.4.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
  <script src="app.js"></script>
</html>
